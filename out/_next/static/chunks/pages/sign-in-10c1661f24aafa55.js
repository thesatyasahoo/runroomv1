(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[312],{35979:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sign-in",function(){return n(36872)}])},36872:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(47568),s=n(26042),a=n(69396),i=n(70603),o=n(20414),l=n(85893),c=n(67294),d=n(9008),u=n.n(d),m=n(41664),h=n.n(m),x=n(82175),g=n(74231),f=n(61953),p=n(79072),v=n(67836),j=n(32631),Z=n(75084),w=n(29630),y=n(99534),b=n(7297),_=n(45697),C=n.n(_);function P(){var e=(0,b.Z)([""]);return P=function(){return e},e}var S=(0,n(81719).ZP)((function(e){e.variant,(0,y.Z)(e,["variant"]);return(0,l.jsx)("img",{alt:"",style:{width:"5rem"},src:"/static/runroom.png"})}))(P());S.defaultProps={variant:"primary"},S.propTypes={variant:C().oneOf(["light","primary"])};var E=n(65462),k=n(11163),T=n.n(k),W=n(9669),B=n.n(W),I=n(96245),N=n(69243),z=n(82741),F=n(25425),q=n(9473),A=n(77546),D=n(1890),O=n(76779),H=n(95398),R=n(77745),V=n(70754),X=n(70461),M=function(){var e=(0,c.useState)(!1),t=e[0],n=e[1],d=(0,c.useState)(""),m=d[0],y=d[1],b=(0,c.useState)(!1),_=b[0],C=b[1],P=(0,i.Z)((0,X.Z)(["admin"]),2),k=(P[0],P[1]),W=(0,c.useState)({status:0,message:""}),z=W[0],F=W[1],M=(0,c.useState)({state:!1,mesage:"",color:"info"}),K=M[0],L=M[1],Q="http://159.223.96.89:4000/admin/login",U="http://159.223.96.89:4000/admin/forgotPassword/",Y=(0,q.I0)(),$=(0,E.Eu)(),ee=(0,x.TA)({initialValues:{email:"",password:"",submit:null},validationSchema:g.Ry({email:g.Z_().email("Must be a valid email").max(255).required("Email is required"),password:g.Z_().min(4).required("Password is required")}),onSubmit:function(){var e=(0,r.Z)((function(e,t){var n,r,s;return(0,o.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),(r={}).email=e.email,r.password=e.password,n=r,[4,B().post(Q.toString(),n).then((function(e){if(console.log(e),"200"===e.data.status){console.log(e.data.access_token);var t=(0,I.Z)(e.data.access_token);re(e.data.msg,"success"),$.signIn(e.data),k("token",e.data.access_token),k("admin",t),Y(A.f.addProfile(t)),T().push("/").catch(console.error)}else re(e.data.msg,"error")})).catch((function(e){t.setFieldError("submit","Please try with valid email & password!")}))];case 1:return a.sent(),[3,3];case 2:return s=a.sent(),console.error(s.message),t.setFieldError("submit",s.message||"Something went wrong"),t.setSubmitting(!1),[3,3];case 3:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}()}),te=function(){var e=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),C(!0),m.length<=0?(F(((e={}).status=400,e.message="Please Enter Email Id!",e)),C(!1),[3,3]):[3,1];case 1:return[4,B().get(U.toString()+m).then((function(e){console.log(e),re(e.data.message,"success"),C(!1),y(""),setTimeout((function(){ne()}),800)})).catch((function(e){F({status:400,message:"Please Provide a Valid Number, Exist In Database!"}),console.log("submit","Please Provide a Number"),C(!1)}))];case 2:n.sent(),n.label=3;case 3:return[3,5];case 4:return t=n.sent(),console.error(t.message),[3,5];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ne=function(){n(!1)},re=function(e,t){L({state:!0,color:t,message:e})},se=function(e,t){"clickaway"!==t&&L(!1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u(),{children:(0,l.jsx)("title",{children:"Sign in"})}),(0,l.jsx)(f.Z,{component:"main",sx:{display:"flex",flex:"1 1 auto"},children:(0,l.jsxs)(p.ZP,{container:!0,sx:{flex:"1 1 auto"},children:[(0,l.jsxs)(p.ZP,{item:!0,xs:12,lg:6,sx:{backgroundColor:"neutral.50",display:"flex",flexDirection:"column",position:"relative"},children:[(0,l.jsx)(f.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",p:3},children:(0,l.jsx)(h(),{href:"/",passHref:!0,children:(0,l.jsx)("a",{children:(0,l.jsx)(S,{sx:{height:42,width:42}})})})}),(0,l.jsx)(f.Z,{sx:{flex:"1 1 auto",alignItems:"center",display:"flex",justifyContent:"center"},children:(0,l.jsx)(f.Z,{sx:{maxWidth:500,px:3,py:"100px",width:"100%"},children:(0,l.jsxs)("div",{children:[(0,l.jsxs)(D.Z,{open:t,maxWidth:"lg",onClose:ne,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,l.jsx)(R.Z,{id:"alert-dialog-title",children:"Forgot Password"}),(0,l.jsx)(H.Z,{style:{minWidth:"30rem"},children:(0,l.jsxs)("div",{children:[(0,l.jsx)(v.Z,{style:{marginBottom:"1rem",marginTop:"1rem"},fullWidth:!0,label:"Email",name:"email",type:"text",value:m,onChange:function(e){y(e.target.value),F((0,a.Z)((0,s.Z)({},z),{message:null}))},variant:"outlined"}),(0,l.jsx)(j.Z,{sx:{mt:1,fontSize:"0.8rem"},children:"Enter a valid Email Address."}),z.status?400===z.status?(0,l.jsx)("p",{style:{color:"red",fontSize:"0.9rem"},children:z.message}):(0,l.jsx)("p",{style:{color:"#5cb85c",fontSize:"0.9rem"},children:z.message}):null,!1===_?(0,l.jsx)(Z.Z,{fullWidth:!0,size:"large",sx:{mt:3},onClick:function(){return te()},variant:"contained",children:"Submit"}):(0,l.jsx)("div",{style:{textAlign:"center",marginTop:"1rem"},children:(0,l.jsx)(V.Z,{})})]})}),(0,l.jsx)(O.Z,{children:(0,l.jsx)(Z.Z,{onClick:ne,autoFocus:!0,children:"Close"})})]}),(0,l.jsx)(N.Z,{anchorOrigin:{horizontal:"center",vertical:"top"},TransitionComponent:J,open:K.state,autoHideDuration:2e3,onClose:se,children:(0,l.jsx)(G,{onClose:se,severity:K.color,sx:{width:"100%"},children:K.message})}),(0,l.jsx)(w.Z,{sx:{mb:1},variant:"h4",children:"Welcome"}),(0,l.jsx)(w.Z,{color:"text.secondary",sx:{mb:3},variant:"p",children:"Sign in on the internal platform"}),(0,l.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,l.jsx)(v.Z,{style:{marginBottom:"1rem"},error:Boolean(ee.touched.email&&ee.errors.email),fullWidth:!0,helperText:ee.touched.email&&ee.errors.email,label:"Email Address",name:"email",onBlur:ee.handleBlur,onChange:ee.handleChange,type:"email",value:ee.values.email,variant:"outlined"}),(0,l.jsx)(v.Z,{error:Boolean(ee.touched.password&&ee.errors.password),fullWidth:!0,helperText:ee.touched.password&&ee.errors.password,label:"Password",name:"password",onBlur:ee.handleBlur,onChange:ee.handleChange,type:"password",value:ee.values.password,variant:"outlined"}),(0,l.jsx)(j.Z,{sx:{mt:1},children:"Enter a valid email & password."}),ee.errors.submit&&(0,l.jsx)(w.Z,{color:"error",sx:{mt:2},variant:"p",children:ee.errors.submit}),(0,l.jsx)(Z.Z,{fullWidth:!0,size:"large",sx:{mt:3},onClick:function(){return ee.handleSubmit()},variant:"contained",children:"Sign In"})]}),(0,l.jsx)(w.Z,{style:{cursor:"pointer"},color:"primary",sx:{mt:2},variant:"body2",align:"center",children:(0,l.jsx)("a",{onClick:function(){n(!0)},style:{textDecoration:"none"},children:"Forgot Password"})})]})})})]}),(0,l.jsx)(p.ZP,{item:!0,xs:12,lg:6,sx:{alignItems:"center",background:"radial-gradient(50% 50% at 50% 50%, #122647 0%, #090E23 100%)",color:"white",display:"flex",justifyContent:"center","& img":{maxWidth:"100%"}},children:(0,l.jsx)(f.Z,{sx:{p:3},children:(0,l.jsx)("img",{alt:"",src:"/static/images/sign-in-illustration.svg"})})})]})})]})},G=c.forwardRef((function(e,t){return(0,l.jsx)(z.Z,(0,s.Z)({elevation:6,ref:t,variant:"filled"},e))}));function J(e){return(0,l.jsx)(F.Z,(0,a.Z)((0,s.Z)({},e),{direction:"down"}))}}},function(e){e.O(0,[834,936,836,981,243,487,141,72,327,774,888,179],(function(){return t=35979,e(e.s=t);var t}));var t=e.O();_N_E=t}]);